<!-- Homepage -->

<!DOCTYPE html>
<html lang="en-US">
  <head>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Website to coordinate the distribution of free food amongst UGA students">
      <meta http-equiv="X-UA-Compatible" content="ie-edge"></meta>
      <link rel="stylesheet" href="CSS/sidenav.css">
      <link rel="stylesheet" href="CSS/homepage.css">
      <link rel="stylesheet" href="CSS/map.css">
      <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
      <script src="sidenav.js"></script>
      <script src="map.js"></script>
      <script src="write.js"></script>
      <title> Free Food UGA </title> <!-- Webpage Title -->
  </head>
  <body>
          <br><br>
          <script>
              // Import the functions you need from the SDKs you need
              // TODO: Add SDKs for Firebase products that you want to use
              // https://firebase.google.com/docs/web/setup#available-libraries
              // Your web app's Firebase configuration
              // For Firebase JS SDK v7.20.0 and later, measurementId is optional

              // Removes Markers Everyday at 11:59 PM if and only if someone loads the page at that time. *NEEDS TO BE FIXED* to delete from database at correct time 
              var hours = new Date().getHours();
              var minutes = new Date().getMinutes();
              if (hours % 23 == 0 && minutes == 59) deleteFromDatabase(); 
          </script>

          <!-- Horizontal Navigation Bar -->
          <ul>
            <li><a href="signin2.html">Sign In</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="https://forms.gle/s2kkRwbRThBNr5px6" target="_blank">Feedback</a></li>
            <li><a href="howtouse.html">How To Use</a></li>
          </ul>

          <!-- Header Of Page -->
          <h1> Free Food UGA </h1> 
  
          <!-- Dawg Picture On Front Page -->
          <image src="Images/dawg.png" alt="Dawg" style="float: right; margin-right: 15px; width: 75px; height: 78px; margin-top: -10px;">
  
          <!-- Add location sidenav -->
          <div id="sidenav" class="sidenav">
              <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times; </a>
      
              <style>
                  h2 { 
                      display: inline;
                  }
              </style>

              <h2> &nbspAdd Food To Map!</h2> <!-- Header Of SideNav -->
              <i>&nbsp*All Fields Are Mandatory<br><br></i>

              <!-- Location Select Query -->
              <label for="locationInput">&nbspLocation:<br> </label>
              <select id="locationInput" name="locationInput">
                  <option value="Select Building">Select Location&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</option>
                  <option value="Amos">Amos</option>
                  <option value="Baldwin">Baldwin Hall</option>
                  <option value="Barrow">Barrow Hall</option>
                  <option value="Benson">Benson Hall</option>
                  <option value="Bishop">Bishop House</option>
                  <option value="Boyd">Boyd</option>
                  <option value="Brooks">Brooks Hall</option>
                  <option value="Brown">Brown Hall</option>
                  <option value="Brumby">Brumby Hall</option>
                  <option value="1516">Building 1516</option>
                  <option value="Caldwell">Caldwell Hall</option>
                  <option value="Chandler">Candler Hall</option>
                  <option value="Carnegie">Carnegie Library</option>
                  <option value="Central Food">Food Storage</option>
                  <option value="Ceramics">Ceramics</option>
                  <option value="Chapel">Chapel</option>
                  <option value="Chemistry">Chemistry</option>
                  <option value="Clark Howell">Clark Howell</option>
                  <option value="Vet Med 1">Veterinary Med</option>
                  <option value="Community">Community Center</option>
                  <option value="Conner Hall">Conner Hall</option>
                  <option value="Correll">Correll Hall</option>
                  <option value="Creswell">Creswell Hall</option>
                  <option value="Life Sciences">Life Sciences</option>
                  <option value="Dawson">Dawson Hall</option>
                  <option value="Demos">Demosthenian</option>
                  <option value="Denmark">Denmark Hall</option>
                  <option value="Driftmier">Driftmier </option>
                  <option value="DW Brooks Mall">DW Brooks Mall</option>
                  <option value="Ecology">Ecology</option>
                  <option value="Environmental Health">Environmental</option>
                  <option value="Fine Arts">Fine Arts</option>
                  <option value="Food Science">Food Science</option>
                  <option value="Franklin">Franklin House</option>
                  <option value="Geography and Geology">Geog & Geol</option>
                  <option value="Busbee">Busbee Hall</option>
                  <option value="Museum of art">Georgia Art</option>
                  <option value="Gilbert">Gilbert Hall</option>
                  <option value="Hardman">Hardman Hall</option>
                  <option value="Hill Hall">Hill Hall</option>
                  <option value="HHSOM">Hugh Hodgson Music</option>
                  <option value="HR">Human Resources</option>
                  <option value="Ivester">Ivester Hall</option>
                  <option value="Jackson St.">Jackson St.</option>
                  <option value="Joe Frank">ECV Dining</option>
                  <option value="Journalism">Journalism</option>
                  <option value="Lamar Dodd">Lamar Dodd</option>
                  <option value="Law">Law Library</option>
                  <option value="LeConte">LeConte Hall</option>
                  <option value="Lipscomb">Lipscomb Hall</option>
                  <option value="Dance">Dance Building</option>
                  <option value="Main library">Main Library</option>
                  <option value="Mary Lyndon">Mary Lyndon Hall</option>
                  <option value="McWhorter">McWhorter Hall</option>
                  <option value="Mell Hall">Mell Hall</option>
                  <option value="Memorial Hall">Memorial Hall</option>
                  <option value="Military Building ROTC">ROTC Building</option>
                  <option value="Milledge Hall">Milledge Hall</option>
                  <option value="MLC">MLC</option>
                  <option value="Miller Plant Science">Plant Science</option>
                  <option value="Moore College">Moore College</option>
                  <option value="Morris Hall">Morris Hall</option>
                  <option value="Myers Hall">Myers Hall</option>
                  <option value="New College">New College</option>
                  <option value="Oglethorpe House">Oglethorpe House</option>
                  <option value="Park Hall">Park Hall</option>
                  <option value="Payne Hall">Payne Hall</option>
                  <option value="Peabody Hall">Peabody Hall</option>
                  <option value="Performing Arts Center">Performing Arts</option>
                  <option value="Physics Building">Physics Building</option>
                  <option value="Poultry Science">Poultry Science</option>
                  <option value="Psychology Building">Psychology Building</option>
                  <option value="Reed Hall">Reed Hall</option>
                  <option value="Rooker Hall">Rooker Hall</option>
                  <option value="Russell Hall">Russell Hall</option>
                  <option value="Rutherford Hall">Rutherford Hall</option>
                  <option value="Sanford Hall">Sanford Hall</option>
                  <option value="SLC">SLC</option>
                  <option value="Soule Hall">Soule Hall</option>
                  <option value="Tate">Tate Student Center</option>
                  <option value="Terrell">Terrell Hall</option>
                  <option value="Tucker">Tucker Hall</option>
                  <option value="UV">University Village</option>
                  <option value="Vandiver">Vandiver Hall</option>
                  <option value="Waddel">Waddel Hall</option>
                  <option value="Wildlife Health">Wildlife Health</option>
                  <option value="Wright Hall">Wright Hall</option>
              </select><br>

              <!-- Food Select Query -->
              <label for="food">&nbspFood: <br></label>
              <select name="foodType" id="foodType">
                  <option value="Select Food">Select Food&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</option>
                  <option value="burger">Burger</option>
                  <option value="candy">Candy</option>
                  <option value="coffee">Coffee</option>
                  <option value="dessert">Dessert</option>
                  <option value="fruit">Fruit</option>
                  <option value="hotdog">Hotdog</option>
                  <option value="meal">Meal</option>
                  <option value="mystery">Mystery</option>
                  <option value="pasta">Pasta</option>
                  <option value="pizza">Pizza</option>
                  <option value="sandwich">Sandwich</option>
                  <option value="snack">Snack</option>
                  <option value="taco">Taco</option>
              </select>
              <br>

              <!-- Duration Select Query -->
              <label for="duration">&nbspDuration: &nbsp&nbsp&nbsp&nbsp<br></label>
              <select name="duration" id="duration">
                  <option value="Select Duration">Select Duration&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</option>
                  <option value="0.5">30 min</option>
                  <option value="1">1 hour</option>
                  <option value="2">2 hours</option>
                  <option value="3">3 hours</option>
              </select>
              <br>

              <!-- Event Text Field -->
              <label for="eventType">&nbspEvent: <br> </label>
              <input type="text" id="eventType" name="eventType"><br>

              <!-- Additional Info Text Field -->
              <label for="additionalType">&nbspAdditional Info: <br> </label>
              <input type="text" id="additionalType" name="additionalType">
              
              <br><br>

              <!-- Take Picture Of Food Section -->
              <label for="picture">&nbspTake A Picture Of The Food!</label><br>
              <input type="file" id = "picture" accept="image/*" width = 10% capture="environment">
              <!-- <input type="image" src="" id = "picture" name = "picture" width="100" height="70">  -->
              <br>

              <!-- Login With Google -->
              <h4 style="text-align:left;"></h4>
              <div id="LoginScreen" style="text-align: left">
                  <button id="login" style = "height:30px;">Login With Google</button>
              </div>

              <!-- If Google Login Is Successful -->
              <div id="dashboard">
                <div id="userDetails"></div>
                <button id="logout">Logout</button>
              </div>

  
    <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="write.js"></script>
    <script>
    // Your web app's Firebase configuration
      document.getElementById('dashboard').style.display="none"
      document.getElementById('login').addEventListener('click', GoogleLogin)
      document.getElementById('logout').addEventListener('click', LogoutUser)
  
      var provider = new firebase.auth.GoogleAuthProvider();
  
      // Gives user opportunity to signin to Google
      function GoogleLogin(){
        console.log('Login Btn Call')
        firebase.auth().signInWithPopup(provider).then(res=>{
          console.log(res.user)
          document.getElementById('LoginScreen').style.display="none"
          document.getElementById('dashboard').style.display="block"
          showUserDetails(res.user)
        }).catch(e=>{
          console.log(e)
        })
      } // GoogleLogin
  
      // Displays User's Google Login Details (only works if they are signed in)
      function showUserDetails(user){
        document.getElementById('userDetails').innerHTML = `
        <img src="${user.photoURL}" style="width:15%">
         <br>
          ${user.email} ✅</p>
        `
      } // showUserDetails
  
      // Checks if the user is logged in, and if so shows the details of the user
      function checkAuthState(){
        firebase.auth().onAuthStateChanged(user=>{
          if(user){
            document.getElementById('LoginScreen').style.display="none"
            document.getElementById('dashboard').style.display="block"
            showUserDetails(user)
          }else{
              // Not Sure
          }
        })
      } // CheckAuthState

      // Takes user to home page
      function home_page() {
          window.location.href = "index.html";
      } // home_page
  
      // Logs user out of google
      function LogoutUser(){
        console.log('Logout Btn Call')
        firebase.auth().signOut().then(()=>{
          document.getElementById('LoginScreen').style.display="block"
          document.getElementById('dashboard').style.display="none"
        }).catch(e=>{
          console.log(e)
        })
      } // LogoutUser

      checkAuthState(); // Checks The User's State
    </script>
    <br>

    <!-- Adding Info To Map Button-->
      <button id="login" style = "width:220px;" onclick = "checkUser()"><h3>Add To Map</h3></button>
      </div>
    <!-- End of SideNav -->

    <!-- Rest Of Home Page -->

    <!-- Span That Allows User To Pull Up SideNav -->
    <span style="font: size 18px; margin: 10px; cursor:pointer" onclick="openNav()">&#9776; Click Here To Add Food To Map</span>
    <br><br>

    <!-- Google Map On Home Page -->
    <div id="map"></div>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCL0ub0DjALB4xzTXexrY3I-epowH8l7nQ&callback=initMap&libraries=&v=weekly"></script>
  </body> <!-- End of body of home page -->
</html> <!-- End of html file from home page -->
